<script lang="ts" setup>
import { computed } from 'vue';

import { VbenAvatar } from '@vben/common-ui';
import { useUserStore } from '@vben/stores';

interface Props {
  avatar?: string;
}

defineOptions({
  name: 'WorkbenchHeader',
});

withDefaults(defineProps<Props>(), {
  avatar: '',
});

const userStore = useUserStore();

// åŠ¨æ€é—®å€™è¯­å‡½æ•°
const getGreeting = computed(() => {
  const hour = new Date().getHours();
  const nickname = userStore.userInfo?.nickname || 'æœ‹å‹';

  const greetings = [
    {
      timeRange: [5, 6] as const,
      messages: [
        `${nickname}ï¼Œæ™¨å…‰åˆçŽ°ï¼ðŸŒ… æ–°çš„å¾ç¨‹å³å°†å¼€å§‹ï¼Œå‡†å¤‡å¥½è¿ŽæŽ¥æ— é™å¯èƒ½äº†å—ï¼Ÿ`,
        `æ—©å®‰ï¼Œ${nickname}ï¼â˜€ï¸ æ¸…æ™¨çš„ç¬¬ä¸€ç¼•é˜³å…‰ä¸ºä½ è€Œæ¥ï¼Œä»Šå¤©è¦åšæœ€æ£’çš„è‡ªå·±ï¼`,
        `${nickname}ï¼Œæ—©èµ·çš„é¸Ÿå„¿æœ‰è™«åƒï¼ðŸ¦ æ–°çš„ä¸€å¤©ï¼Œæ–°çš„æœºé‡ï¼Œè®©æˆ‘ä»¬ä¸€èµ·å‘å…‰å‘çƒ­ï¼`,
      ],
    },
    {
      timeRange: [7, 8] as const,
      messages: [
        `ç¾Žå¥½çš„æ—©æ™¨ï¼Œ${nickname}ï¼ðŸŒ„ å’–å•¡é¦™æ°”ä¼´éšç€æ™¨æ›¦ï¼Œæ˜¯æ—¶å€™å¼€å¯é«˜æ•ˆæ¨¡å¼äº†ï¼`,
        `${nickname}ï¼Œæ—©å®‰ï¼âœ¨ æ¯ä¸€ä¸ªæ¸…æ™¨éƒ½æ˜¯é‡æ–°å‡ºå‘çš„æœºä¼šï¼Œä»Šå¤©çš„ä½ ä¼šæ›´ç²¾å½©ï¼`,
        `æ—©ä¸Šå¥½ï¼Œ${nickname}ï¼ðŸŽ¯ æ–°çš„ä¸€å¤©ï¼Œæ–°çš„ç›®æ ‡ï¼Œè®©æˆ‘ä»¬ä¸€èµ·åˆ›é€ å¥‡è¿¹ï¼`,
      ],
    },
    {
      timeRange: [9, 10] as const,
      messages: [
        `${nickname}ï¼Œä¸Šåˆå¥½ï¼ðŸ’¼ å·¥ä½œçŠ¶æ€å·²æ¿€æ´»ï¼Œè®©æˆ‘ä»¬åœ¨ä¸“ä¸šçš„é“è·¯ä¸Šå‹‡æ•¢å‰è¡Œï¼`,
        `æ´»åŠ›æ»¡æ»¡çš„ä¸Šåˆï¼Œ${nickname}ï¼ðŸš€ æ˜¯æ—¶å€™å±•çŽ°ä½ çš„æ‰åŽå’Œåˆ›é€ åŠ›äº†ï¼`,
        `${nickname}ï¼Œæ–°çš„ä¸€å¤©æ­£å¼å¼€å§‹ï¼âš¡ å¸¦ç€æ»¡è…”çƒ­æƒ…åŽ»å¾æœæ¯ä¸€ä¸ªæŒ‘æˆ˜å§ï¼`,
      ],
    },
    {
      timeRange: [11, 11] as const,
      messages: [
        `${nickname}ï¼Œä¸Šåˆçš„é»„é‡‘æ—¶å…‰ï¼â° ä¸“æ³¨åŠ›æ­£å€¼å·…å³°ï¼Œæ˜¯æ”»å…‹éš¾é¢˜çš„æœ€ä½³æ—¶æœºï¼`,
        `ä¸´è¿‘åˆé—´ï¼Œ${nickname}ï¼ðŸŽ¨ åˆ›æ„æ€ç»´æ­£åœ¨é«˜é€Ÿè¿è½¬ï¼Œçµæ„Ÿå³å°†çˆ†å‘ï¼`,
        `${nickname}ï¼Œç»§ç»­ä¿æŒè¿™ä»½ä¸“æ³¨ï¼ðŸŽ¯ è·ç¦»åˆä¼‘è¿˜æœ‰ä¸€ç‚¹æ—¶é—´ï¼Œå†å†²åˆºä¸€ä¸‹ï¼`,
      ],
    },
    {
      timeRange: [12, 13] as const,
      messages: [
        `${nickname}ï¼Œåˆé¤æ—¶å…‰ï¼ðŸ½ï¸ å·¥ä½œè¾›è‹¦äº†ï¼Œè®°å¾—çŠ’èµä¸€ä¸‹åŠªåŠ›çš„è‡ªå·±å“¦ï¼`,
        `ä¸­åˆå¥½ï¼Œ${nickname}ï¼â˜€ï¸ æš‚åœä¸€ä¸‹å¿™ç¢Œçš„èŠ‚å¥ï¼Œç»™å¤§è„‘å’Œèº«ä½“å……å……ç”µï¼`,
        `${nickname}ï¼Œè¯¥ä¼‘æ¯ä¸€ä¸‹äº†ï¼ðŸŒ¼ ç¾Žé£ŸåŠ é˜³å…‰ï¼Œä¸‹åˆä¼šæœ‰æ›´æ£’çš„è¡¨çŽ°ï¼`,
        `åˆé—´ä¼‘æ†©ï¼Œ${nickname}ï¼ðŸ˜Œ åŠ³é€¸ç»“åˆæ‰æ˜¯æŒç»­é«˜æ•ˆçš„ç§˜è¯€ï¼`,
      ],
    },
    {
      timeRange: [14, 15] as const,
      messages: [
        `${nickname}ï¼Œä¸‹åˆå¥½ï¼ðŸŒ» åˆåŽçš„é˜³å…‰æ­£æš–ï¼Œæ˜¯æ—¶å€™é‡æ–°æŠ•å…¥æˆ˜æ–—äº†ï¼`,
        `ä¸‹åˆçš„å¼€å§‹ï¼Œ${nickname}ï¼ðŸ’« å¸¦ç€åˆä¼‘åŽçš„æ´»åŠ›ï¼Œç»§ç»­åˆ›é€ ç²¾å½©ï¼`,
        `${nickname}ï¼Œä¸‹åˆæ—¶å…‰ï¼ðŸŽª è®©æˆ‘ä»¬ç”¨é¥±æ»¡çš„ç²¾ç¥žçŠ¶æ€è¿ŽæŽ¥æ–°çš„æŒ‘æˆ˜ï¼`,
      ],
    },
    {
      timeRange: [16, 17] as const,
      messages: [
        `${nickname}ï¼Œä¸‹åˆè¿›è¡Œæ—¶ï¼âš¡ ä¿æŒä¸“æ³¨ï¼Œè·ç¦»ä»Šå¤©çš„èƒœåˆ©è¶Šæ¥è¶Šè¿‘äº†ï¼`,
        `åŠ æ²¹ï¼Œ${nickname}ï¼ðŸƒâ€â™‚ï¸ ä¸‹åˆçš„å†²åˆºé˜¶æ®µï¼Œè®©æˆ‘ä»¬å…¨åŠ›ä»¥èµ´ï¼`,
        `${nickname}ï¼Œç¨³ä½èŠ‚å¥ï¼ðŸŽµ æ¯ä¸€åˆ†åŠªåŠ›éƒ½åœ¨ä¸ºæˆåŠŸç§¯ç´¯èƒ½é‡ï¼`,
      ],
    },
    {
      timeRange: [18, 19] as const,
      messages: [
        `${nickname}ï¼Œå‚æ™šå¥½ï¼ðŸŒ‡ å¤•é˜³è¥¿ä¸‹ï¼Œä»Šå¤©çš„åŠªåŠ›å³å°†æ”¶èŽ·æ»¡æ»¡çš„æˆå°±æ„Ÿï¼`,
        `æ™šä¸Šå¥½ï¼Œ${nickname}ï¼ðŸŒŸ åŽç¯åˆä¸Šï¼Œä½ çš„åšæŒè®©è¿™ä¸€å¤©æ ¼å¤–é—ªäº®ï¼`,
        `${nickname}ï¼Œå‚æ™šæ—¶åˆ†ï¼ðŸŽ­ å›žé¡¾ä»Šå¤©çš„æ”¶èŽ·ï¼Œä¸ºæ˜Žå¤©çš„ç²¾å½©åšå¥½å‡†å¤‡ï¼`,
      ],
    },
    {
      timeRange: [20, 21] as const,
      messages: [
        `${nickname}ï¼Œå¤œæ™šå¥½ï¼ðŸŒƒ ä»Šå¤©çš„åŠªåŠ›å€¼å¾—ä¸ºè‡ªå·±ç‚¹ä¸ªèµžï¼Œä½ çœŸçš„å¾ˆæ£’ï¼`,
        `æ™šé—´æ—¶å…‰ï¼Œ${nickname}ï¼âœ¨ å¿™ç¢Œäº†ä¸€å¤©ï¼Œæ˜¯æ—¶å€™æ”¾æ¾ä¸€ä¸‹äº«å—ç”Ÿæ´»äº†ï¼`,
        `${nickname}ï¼Œå¤œå¹•é™ä¸´ï¼ðŸŒ™ ä»Šå¤©çš„æ¯ä¸€ä»½ä»˜å‡ºéƒ½æ˜¯æ˜Žå¤©æˆåŠŸçš„åŸºçŸ³ï¼`,
      ],
    },
    {
      timeRange: [22, 23] as const,
      messages: [
        `${nickname}ï¼Œæ·±å¤œäº†ï¼ðŸŒŒ è®°å¾—æ—©ç‚¹ä¼‘æ¯ï¼Œæ˜Žå¤©è¿˜æœ‰æ›´å¤šç²¾å½©ç­‰ç€ä½ ï¼`,
        `å¤œæ·±äººé™ï¼Œ${nickname}ï¼ðŸ’¤ åŠ³é€¸ç»“åˆæ˜¯æ™ºè€…çš„é€‰æ‹©ï¼Œå¥½æ¢¦ï¼`,
        `${nickname}ï¼Œè¯¥è¯´æ™šå®‰äº†ï¼ðŸ›Œ å……è¶³çš„ç¡çœ æ˜¯æ˜Žå¤©é«˜æ•ˆå·¥ä½œçš„ä¿è¯ï¼`,
      ],
    },
    {
      timeRange: [0, 4] as const,
      messages: [
        `${nickname}ï¼Œå¤œçŒ«å­æ¨¡å¼ï¼ŸðŸ¦‰ è™½ç„¶å¤œæ·±äº†ï¼Œä½†ä½ çš„åŠªåŠ›è®©äººæ•¬ä½©ï¼è®°å¾—é€‚åº¦ä¼‘æ¯å“¦ï¼`,
        `æ·±å¤œå¥½ï¼Œ${nickname}ï¼ðŸŒŸ å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿï¼Œå°±æ˜¯åšæŒæ¢¦æƒ³çš„ä½ ï¼`,
        `${nickname}ï¼Œå‡Œæ™¨æ—¶åˆ†ï¼ðŸŒ™ å¤œæ·±äº†è¦æ³¨æ„èº«ä½“ï¼Œæ˜Žå¤©çš„å¤ªé˜³è¿˜åœ¨ç­‰ä½ ï¼`,
        `${nickname}ï¼Œå¤œå·²æ·±ï¼ðŸ˜´ å†åŠªåŠ›ä¹Ÿè¦è®°å¾—ç…§é¡¾å¥½è‡ªå·±ï¼Œå¥åº·æœ€é‡è¦ï¼`,
      ],
    },
  ];

  const currentGreeting = greetings.find((greeting) => {
    const [start, end] = greeting.timeRange;
    return start <= end
      ? hour >= start && hour <= end
      : hour >= start || hour <= end;
  });

  if (currentGreeting?.messages) {
    // éšæœºé€‰æ‹©ä¸€æ¡é—®å€™è¯­
    const randomIndex = Math.floor(
      Math.random() * currentGreeting.messages.length,
    );
    return currentGreeting.messages[randomIndex];
  }

  // é»˜è®¤é—®å€™è¯­
  const defaultMessages = [
    `ä½ å¥½ï¼Œ${nickname}ï¼è®©æˆ‘ä»¬ä¸€èµ·åŠªåŠ›åˆ›é€ ç¾Žå¥½çš„ä¸€å¤©ï¼âœ¨`,
    `${nickname}ï¼Œæ¬¢è¿Žå›žæ¥ï¼ä»Šå¤©ä¹Ÿè¦å…ƒæ°”æ»¡æ»¡å“¦ï¼ðŸŒˆ`,
    `å—¨ï¼Œ${nickname}ï¼å‡†å¤‡å¥½è¿ŽæŽ¥æ–°çš„æŒ‘æˆ˜äº†å—ï¼ŸðŸ’ª`,
    `${nickname}ï¼Œåˆè§é¢äº†ï¼è®©æˆ‘ä»¬ä¸€èµ·åˆ›é€ ç²¾å½©æ—¶åˆ»ï¼ðŸš€`,
  ];

  const randomDefaultIndex = Math.floor(Math.random() * defaultMessages.length);
  return defaultMessages[randomDefaultIndex];
});
</script>
<template>
  <div class="card-box p-4 py-6 lg:flex">
    <VbenAvatar :src="avatar" class="size-20" />
    <div class="flex flex-col justify-center md:ml-6 md:mt-0">
      <h1 class="text-md font-semibold md:text-xl">
        {{ getGreeting }}
      </h1>
      <span v-if="$slots.description" class="text-foreground/80 mt-1">
        <slot name="description"></slot>
      </span>
    </div>
  </div>
</template>
