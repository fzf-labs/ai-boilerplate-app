# 测试用例编写指南

## 目录

1. [从PRD提取测试场景](#从prd提取测试场景)
2. [字段详细说明](#字段详细说明)
3. [测试用例类型](#测试用例类型)
4. [编写质量标准](#编写质量标准)
5. [常见错误和最佳实践](#常见错误和最佳实践)

---

## 从PRD提取测试场景

### 提取策略

从PRD文档中识别可测试点，按以下层次结构提取：

1. **功能模块** → 识别主要功能模块
2. **用户故事** → 每个用户故事至少一个测试场景
3. **业务规则** → 每条业务规则对应验证用例
4. **界面元素** → UI交互和展示验证
5. **边界条件** → 从数据范围、限制条件中提取
6. **异常流程** → 识别可能的错误场景

### PRD关键章节映射

| PRD章节 | 测试用例类型 | 提取重点 |
|---------|-------------|----------|
| 功能需求 | 功能测试 | 正向流程、核心功能点 |
| 业务规则 | 功能测试 + 边界值 | 规则验证、边界条件 |
| 用户界面 | UI/UX测试 | 交互逻辑、视觉验证 |
| 数据字段 | 边界值测试 | 字段范围、格式验证 |
| 异常处理 | 功能测试(异常流) | 错误提示、容错处理 |
| 性能要求 | 性能测试 | 响应时间、并发量 |
| 安全要求 | 安全测试 | 权限控制、数据安全 |

### 提取示例

**PRD原文：**
> 用户登录功能：用户输入用户名和密码后点击登录按钮，系统验证用户信息。验证成功后跳转到首页，失败则提示错误信息。用户名长度为6-20个字符，密码长度为8-16个字符且必须包含字母和数字。

**提取的测试场景：**

1. **功能测试-正向流程**
   - TC-001: 使用有效用户名和密码登录成功

2. **功能测试-异常流程**
   - TC-002: 使用错误的用户名登录失败
   - TC-003: 使用错误的密码登录失败
   - TC-004: 用户名或密码为空时的提示

3. **边界值测试**
   - TC-005: 用户名长度边界值测试(5、6、20、21个字符)
   - TC-006: 密码长度边界值测试(7、8、16、17个字符)
   - TC-007: 密码格式验证(仅字母、仅数字、包含特殊字符)

4. **UI测试**
   - TC-008: 登录按钮的可用性和状态
   - TC-009: 错误提示信息的显示位置和样式
   - TC-010: 密码输入框的掩码显示

---

## 字段详细说明

### 用例ID

**格式**: `TC-XXX`

**规则**:
- 使用连续编号，从001开始
- 同一测试类型建议使用连续的ID段
- 示例: TC-001, TC-002, TC-003

### 用例名称

**要求**:
- 简洁明了，一句话说明测试场景
- 包含操作和预期结果
- 长度控制在50字以内

**好的示例**:
- ✅ "使用有效凭据登录系统成功"
- ✅ "输入超长用户名时显示错误提示"
- ✅ "删除已关联的用户时阻止操作"

**不好的示例**:
- ❌ "测试登录" (太笼统)
- ❌ "验证系统在用户输入正确的用户名和密码后是否能够..." (太冗长)

### 关联需求ID

**格式**: `REQ-XXX` 或根据项目规范

**说明**:
- 必须能追溯到PRD中的具体需求
- 一个测试用例可以关联多个需求ID
- 便于需求覆盖率统计

### 测试类型

**可选值**:
- `功能测试`: 验证功能是否按需求实现
- `边界值测试`: 验证输入边界和极限值
- `UI测试`: 验证界面展示和交互
- `性能测试`: 验证响应时间和吞吐量
- `安全测试`: 验证权限和数据安全
- `兼容性测试`: 验证跨平台/浏览器兼容性
- `集成测试`: 验证模块间交互

### 优先级

**分级标准**:

| 优先级 | 说明 | 示例场景 |
|--------|------|----------|
| **P0-阻塞** | 核心功能，失败则系统不可用 | 用户无法登录、数据丢失 |
| **P1-高** | 主要功能，严重影响用户体验 | 支付失败、搜索无结果 |
| **P2-中** | 一般功能，影响部分用户体验 | UI显示偏差、非关键提示错误 |
| **P3-低** | 次要功能，影响较小 | 边缘案例、优化建议 |

### 负责人

**填写规则**:
- 填写测试工程师姓名或工号
- 可以是团队名称
- 用于责任追踪和沟通

### 自动化标识

**可选值**:
- `可自动化`: 适合自动化测试的用例
- `手工测试`: 需要人工判断或复杂操作
- `待评估`: 自动化可行性需进一步分析

**判断标准**:
- ✅ 可自动化: 步骤明确、结果可验证、无需主观判断
- ❌ 手工测试: 需要视觉判断、复杂交互、探索性测试

### 前置条件

**要求**:
- 列出执行测试前必须满足的条件
- 包括系统状态、数据准备、环境配置
- 明确且可验证

**示例**:
```markdown
1. 系统已部署到测试环境 (http://test.example.com)
2. 数据库中存在测试用户: username=testuser, password=Test@123
3. 用户未登录状态
4. 浏览器已清除缓存和Cookie
```

### 测试步骤

**要求**:
- 步骤编号清晰，操作描述具体
- 包含具体的测试数据
- 每个步骤只做一个操作
- 使用表格格式便于阅读

**示例**:

| 步骤 | 操作描述 | 测试数据 |
|------|----------|----------|
| 1 | 打开登录页面 | URL: http://test.example.com/login |
| 2 | 在用户名输入框输入用户名 | testuser |
| 3 | 在密码输入框输入密码 | Test@123 |
| 4 | 点击"登录"按钮 | - |
| 5 | 观察页面跳转和提示信息 | - |

### 预期结果

**要求**:
- 描述每个步骤或最终的预期输出
- 结果必须是可观察、可验证的
- 包含具体的数据或状态

**示例**:
```markdown
1. 页面成功跳转到首页 (URL: http://test.example.com/home)
2. 页面右上角显示用户名 "testuser"
3. 不再显示登录按钮
4. 本地存储中保存了 token 信息
```

### 测试数据

**要求**:
- 提供完整的测试数据
- 标注哪些是有效数据、哪些是无效数据
- 使用易读的格式(JSON、表格、代码块)

**示例**:
```json
{
  "valid_user": {
    "username": "testuser",
    "password": "Test@123"
  },
  "invalid_user": {
    "username": "invaliduser",
    "password": "WrongPass"
  },
  "boundary_cases": {
    "min_length_username": "user01",
    "max_length_username": "user12345678901234567890",
    "special_chars_password": "Test@#$%123"
  }
}
```

---

## 测试用例类型

### 功能测试用例

**定义**: 验证功能是否按照需求正确实现

**覆盖范围**:
1. **正向流程**: 正常业务场景，输入有效数据
2. **异常流程**: 错误场景，输入无效数据或异常操作

**编写要点**:
- 每个功能点至少一个正向用例
- 识别所有可能的错误场景
- 验证错误提示是否友好和准确

**示例场景**:
- ✅ 用户使用正确凭据登录成功
- ✅ 用户输入错误密码时显示错误提示
- ✅ 提交订单后订单状态更新为"待支付"
- ✅ 删除不存在的记录时提示错误

### 边界值测试用例

**定义**: 验证输入边界和极限值的处理

**边界类型**:
1. **长度边界**: 最小值-1, 最小值, 最大值, 最大值+1
2. **数值范围**: 负数, 0, 正数, 最大值, 超出范围
3. **格式边界**: 特殊字符, 空格, 多字节字符
4. **时间边界**: 过去时间, 当前时间, 未来时间

**编写要点**:
- 识别所有输入字段的约束条件
- 测试边界值的4个点: min-1, min, max, max+1
- 包含空值、null、特殊字符的测试

**示例场景**:
- ✅ 用户名长度为5个字符时提示错误(最小长度6)
- ✅ 用户名长度为6个字符时验证通过
- ✅ 用户名长度为20个字符时验证通过
- ✅ 用户名长度为21个字符时提示错误(最大长度20)
- ✅ 输入框接受0、负数、小数的处理
- ✅ 日期选择器限制未来日期的选择

### UI/UX测试用例

**定义**: 验证用户界面展示和交互体验

**测试维度**:
1. **布局展示**: 元素位置、对齐、间距
2. **交互反馈**: 按钮状态、加载提示、动画效果
3. **响应式**: 不同屏幕尺寸的适配
4. **易用性**: 操作流畅性、信息清晰度

**编写要点**:
- 描述具体的视觉和交互细节
- 包含不同设备和分辨率的测试
- 验证无障碍访问(可选)

**示例场景**:
- ✅ 登录按钮在输入框为空时显示为禁用状态
- ✅ 点击登录按钮后显示加载动画
- ✅ 错误提示信息显示在表单下方,红色字体
- ✅ 在移动端屏幕上,表单垂直排列且占满宽度
- ✅ Tab键可以在输入框间正确切换焦点

---

## 编写质量标准

### 完整性检查

- [ ] 每个测试用例包含所有必填字段
- [ ] 关联需求ID可以追溯到PRD
- [ ] 测试步骤清晰且可执行
- [ ] 预期结果明确且可验证
- [ ] 测试数据完整且有效

### 清晰性检查

- [ ] 用例名称简洁明了
- [ ] 操作步骤具体,无歧义
- [ ] 使用统一的术语和格式
- [ ] 避免技术术语,易于非技术人员理解

### 覆盖性检查

- [ ] 正向流程全覆盖
- [ ] 主要异常场景已覆盖
- [ ] 边界值测试已包含
- [ ] UI交互已验证
- [ ] 优先级分布合理(P0/P1占比60%以上)

### 可执行性检查

- [ ] 前置条件可以准备
- [ ] 测试步骤可以重复执行
- [ ] 测试数据真实可用
- [ ] 不依赖特定测试人员的知识

---

## 常见错误和最佳实践

### 常见错误

1. **用例名称太笼统**
   - ❌ "测试登录功能"
   - ✅ "使用有效凭据登录成功"

2. **步骤描述不清晰**
   - ❌ "输入数据"
   - ✅ "在用户名输入框输入 'testuser'"

3. **预期结果不可验证**
   - ❌ "系统正常工作"
   - ✅ "页面跳转到首页,URL为 http://test.example.com/home"

4. **缺少异常场景**
   - ❌ 只测试成功登录
   - ✅ 同时测试成功登录、密码错误、用户名不存在、网络异常等

5. **边界值不完整**
   - ❌ 只测试最小值和最大值
   - ✅ 测试 min-1, min, max, max+1 四个边界点

6. **测试数据不现实**
   - ❌ 使用"123"作为密码
   - ✅ 使用符合实际规则的密码"Test@123"

### 最佳实践

1. **保持原子性**
   - 每个测试用例只验证一个功能点或场景
   - 避免一个用例测试多个不相关的功能

2. **使用真实数据**
   - 测试数据应符合实际业务场景
   - 包含各种典型和极端情况

3. **编写独立的用例**
   - 测试用例之间不应有依赖关系
   - 可以任意顺序执行

4. **定期更新**
   - PRD变更时同步更新测试用例
   - 发现新的边界场景时补充用例

5. **使用检查清单**
   - 每个功能点检查:正常流程、异常流程、边界值、UI交互
   - 确保没有遗漏的测试场景

6. **结构化组织**
   - 按功能模块分组
   - 使用清晰的编号规则
   - 添加适当的统计和汇总信息

---

## 测试用例审查检查清单

在生成测试用例后,使用以下检查清单进行自查:

### 内容完整性
- [ ] 所有必填字段已填写
- [ ] 测试类型和优先级已标注
- [ ] 关联需求ID正确
- [ ] 测试数据完整

### 逻辑正确性
- [ ] 前置条件可实现
- [ ] 测试步骤逻辑连贯
- [ ] 预期结果合理
- [ ] 无明显遗漏场景

### 覆盖充分性
- [ ] 正向流程已覆盖
- [ ] 异常流程已考虑
- [ ] 边界值已测试
- [ ] UI交互已验证

### 质量标准
- [ ] 描述清晰无歧义
- [ ] 格式规范统一
- [ ] 可独立执行
- [ ] 结果可验证
